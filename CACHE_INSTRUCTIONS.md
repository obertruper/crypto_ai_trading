# üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫—ç—à–µ–º –¥–∞–Ω–Ω—ã—Ö

## üî¥ –í–ê–ñ–ù–û: –ö—ç—à –±—ã–ª –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º VWAP!

### ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. **feature_engineering.py** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á–µ—Ç VWAP:
   - –£–≤–µ–ª–∏—á–µ–Ω `min_denominator` —Å 1e-4 –¥–æ 0.01
   - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `calculate_vwap` —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω `close_vwap_ratio` –º–∞–∫—Å–∏–º—É–º–æ–º 2.0

2. **–°—Ç–∞—Ä—ã–π –∫—ç—à —É–¥–∞–ª–µ–Ω** - —Å–æ–¥–µ—Ä–∂–∞–ª —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ 1.14e18

## üöÄ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫—ç—à:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ prepare_trading_data.py (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
```bash
python prepare_trading_data.py
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª—ã –≤ `data/processed/`:
- `train_data.parquet` 
- `val_data.parquet`
- `test_data.parquet`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ main.py
```bash
python main.py --mode data
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—É—á–µ–Ω–∏–∏
```bash
python main.py --mode train
```
–ï—Å–ª–∏ –∫—ç—à –Ω–µ –Ω–∞–π–¥–µ–Ω, –æ–Ω —Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞:

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
```bash
python check_cache_compatibility.py
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è VWAP:
```bash
python test_vwap_fix.py
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. **prepare_trading_data.py** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ `FeatureEngineer` —á—Ç–æ –∏ `main.py`
2. –í—Å–µ 36 —Ü–µ–ª–µ–≤—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ `config.yaml` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∫—ç—à
3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ –º–µ–∂–¥—É —Å–∫—Ä–∏–ø—Ç–∞–º–∏
4. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫—ç—à–∞, `main.py --mode train` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ–≥–æ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- `close_vwap_ratio`: –æ—Ç 0.5 –¥–æ 2.0 (–≤–º–µ—Å—Ç–æ 1.14e18)
- –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –±–µ–∑ inf/NaN
- –õ—É—á—à–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ warnings –æ –±–æ–ª—å—à–∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö

## üìù –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞:

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –∫—ç—à (10-15 –º–∏–Ω—É—Ç)
python prepare_trading_data.py

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à
python check_cache_compatibility.py

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ
python main.py --mode train
```

---

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-07-01 –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è VWAP*