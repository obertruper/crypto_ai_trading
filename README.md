# Crypto AI Trading System

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ç–æ—Ä–≥–æ–≤–ª–∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–º–∏ —Ñ—å—é—á–µ—Ä—Å–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PatchTST (Patch Time Series Transformer).

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö** –∏–∑ PostgreSQL —Å —Ñ—å—é—á–µ—Ä—Å–Ω–æ–≥–æ —Ä—ã–Ω–∫–∞ Bybit
- **–ò–Ω–∂–µ–Ω–µ—Ä–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤** - 100+ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ –º–∏–∫—Ä–æ—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
- **PatchTST –º–æ–¥–µ–ª—å** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤
- **–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏ —Å —á–∞—Å—Ç–∏—á–Ω—ã–º–∏ –∑–∞–∫—Ä—ã—Ç–∏—è–º–∏
- **–ë—ç–∫—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±—É—á–µ–Ω–∏—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üìä –î–∞–Ω–Ω—ã–µ

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ PostgreSQL:
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `crypto_trading` –Ω–∞ –ø–æ—Ä—Ç—É 5555
- **–¢–∞–±–ª–∏—Ü–∞**: `raw_market_data`
- **–¢–∏–ø —Ä—ã–Ω–∫–∞**: —Ñ—å—é—á–µ—Ä—Å—ã
- **–¢–∞–π–º—Ñ—Ä–µ–π–º**: 15 –º–∏–Ω—É—Ç
- **–°–∏–º–≤–æ–ª—ã**: 50 –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –ø–∞—Ä
- **–ü–µ—Ä–∏–æ–¥**: 2022-06-08 –¥–æ 2025-06-16
- **–ó–∞–ø–∏—Å–µ–π**: ~3.9 –º–∏–ª–ª–∏–æ–Ω–∞

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**:
```bash
cd crypto_ai_trading
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏ venv\Scripts\activate  # Windows
pip install -r requirements.txt
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**:
   - –û–±–Ω–æ–≤–∏—Ç–µ `config/config.yaml` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –≤–∞—à–µ–π –ë–î
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∏–º–≤–æ–ª—ã –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**:
```bash
python main.py --mode demo
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—É—á–µ–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
python main.py --mode full
```

### –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

**1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
```bash
python main.py --mode data
```

**2. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏:**
```bash
python main.py --mode train
```

**3. –ë—ç–∫—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
python main.py --mode backtest --model-path models_saved/patchtst_20241218_123456.pth
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
crypto_ai_trading/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ config.yaml              # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ logging_config.py        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py          # –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ feature_engineering.py  # –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ processed/              # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ patchtst.py             # PatchTST –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ ensemble.py             # –ê–Ω—Å–∞–º–±–ª—å –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ trading/
‚îÇ   ‚îú‚îÄ‚îÄ risk_manager.py         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ signals.py              # –¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ backtester.py           # –ë—ç–∫—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ logger.py               # –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ metrics.py              # –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ü–µ–Ω–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ visualization.py        # –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ experiments/
‚îÇ   ‚îî‚îÄ‚îÄ logs/                   # –õ–æ–≥–∏ –æ–±—É—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ models_saved/               # –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îî‚îÄ‚îÄ main.py                     # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `config/config.yaml`:

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
```yaml
database:
  host: "localhost"
  port: 5555
  database: "crypto_trading"
  user: "ruslan"
  password: "ruslan"
```

**–ú–æ–¥–µ–ª—å PatchTST:**
```yaml
model:
  patch_len: 16
  stride: 8
  context_window: 168  # 42 —á–∞—Å–∞
  d_model: 128
  n_heads: 8
  pred_len: 4  # –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 1 —á–∞—Å
```

**–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç:**
```yaml
risk_management:
  stop_loss_pct: 1.1
  take_profit_targets: [1.2, 2.4, 3.5, 5.8]
  position_sizing:
    method: "volatility_based"
    risk_per_trade_pct: 1.0
```

## üìä –ü—Ä–∏–∑–Ω–∞–∫–∏ –º–æ–¥–µ–ª–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (50+ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤):
- **–¢—Ä–µ–Ω–¥–æ–≤—ã–µ**: SMA, EMA, MACD, ADX, Parabolic SAR
- **–û—Å—Ü–∏–ª–ª—è—Ç–æ—Ä—ã**: RSI, Stochastic, Williams %R
- **–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å**: ATR, Bollinger Bands
- **–û–±—ä–µ–º–Ω—ã–µ**: Volume ratios, VWAP

### –ú–∏–∫—Ä–æ—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:
- –°–ø—Ä–µ–¥—ã high-low
- Volume imbalance
- Price impact –∏ toxicity
- Amihud illiquidity

### –ö—Ä–æ—Å—Å-–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:
- –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å BTC
- –°–µ–∫—Ç–æ—Ä–Ω—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏
- Momentum leaders
- Relative strength

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:
- –¢–æ—Ä–≥–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏
- –¶–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
- –°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å

## üéØ –¶–µ–ª–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç:
- **Take Profit —É—Ä–æ–≤–Ω–∏**: 1.2%, 2.4%, 3.5%, 5.8%
- **Stop Loss**: 1.1%
- **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ**: –∫–∞–∫–æ–π TP —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å
- **–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å**: –æ–∂–∏–¥–∞–µ–º–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç:
- **–ú–µ—Ç—Ä–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è**: Loss, Learning Rate, Accuracy
- **–ë—ç–∫—Ç–µ—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**: Sharpe Ratio, Max Drawdown, Win Rate
- **–¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã**: —Å —É—Ä–æ–≤–Ω—è–º–∏ SL/TP –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
- **–í–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤**: —Ç–æ–ø —Ñ–∞–∫—Ç–æ—Ä—ã –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤

## üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- **–¶–≤–µ—Ç–Ω–æ–π –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥**
- **–†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤**
- **JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–∞–π–º–µ—Ä—ã —ç—Ç–∞–ø–æ–≤**

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `experiments/logs/`:
```
CryptoAI_20241218.log          # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥
CryptoAI_structured_20241218.json  # JSON –ª–æ–≥
```

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤:
1. –î–æ–ø–æ–ª–Ω–∏—Ç–µ `data/feature_engineering.py`
2. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `config/config.yaml`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –¥–∞–Ω–Ω—ã—Ö

–î–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π:
1. –°–æ–∑–¥–∞–π—Ç–µ –º–æ–¥—É–ª—å –≤ `models/`
2. –ù–∞—Å–ª–µ–¥—É–π—Ç–µ –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `ensemble.py` –¥–ª—è –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üìù –õ–æ–≥–∏–∫–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏

1. **–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ**: –º–æ–¥–µ–ª—å –≤—ã–¥–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP —É—Ä–æ–≤–Ω–µ–π
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Ä—ã–Ω–æ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
3. **–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Ä–∞–∑–º–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ ATR –∏ —Ä–∏—Å–∫–∞ –Ω–∞ —Å–¥–µ–ª–∫—É
4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: —á–∞—Å—Ç–∏—á–Ω—ã–µ –∑–∞–∫—Ä—ã—Ç–∏—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö –ø—Ä–∏–±—ã–ª–∏
5. **–ó–∞—â–∏—Ç–∞**: trailing stop –∏ breakeven –º–µ—Ö–∞–Ω–∏–∑–º—ã

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bybit API –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä (LSTM, Transformer)
- [ ] –ü–æ—Ä—Ç—Ñ–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏
- [ ] Sentiment –∞–Ω–∞–ª–∏–∑ –∏–∑ –Ω–æ–≤–æ—Å—Ç–µ–π –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π
- [ ] Options flow –¥–∞–Ω–Ω—ã–µ
- [ ] –ú–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

## ‚ö†Ô∏è –î–∏—Å–∫–ª–µ–π–º–µ—Ä

–î–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ü–µ–ª–µ–π. –¢–æ—Ä–≥–æ–≤–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º–∏ —Å–æ–ø—Ä—è–∂–µ–Ω–∞ —Å –≤—ã—Å–æ–∫–∏–º–∏ —Ä–∏—Å–∫–∞–º–∏. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–æ–¥–∏—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º.