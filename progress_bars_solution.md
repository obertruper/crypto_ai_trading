# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤ –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç, –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã tqdm –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—è –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –∏ —Å–æ–∑–¥–∞–≤–∞—è –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ö–∞–æ—Å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

## –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—ã–≤–æ–¥–∞
```python
from multiprocessing import RLock
from tqdm import tqdm

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –¥–ª—è tqdm
tqdm.set_lock(RLock())

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤
with concurrent.futures.ProcessPoolExecutor(max_workers=n_processes, 
                                            initializer=tqdm.set_lock, 
                                            initargs=(tqdm.get_lock(),)) as executor:
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤
```python
# –í prepare_trading_data.py
future = executor.submit(
    process_func, 
    symbol, 
    raw_data[raw_data['symbol'] == symbol].copy(),
    position=idx * 2,
    disable_progress=True  # –û—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
)
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω FeatureEngineer –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ñ–ª–∞–≥–∞
```python
class FeatureEngineer:
    def __init__(self, config: Dict):
        # ...
        self.process_position = None
        self.disable_progress = False  # –ù–æ–≤—ã–π —Ñ–ª–∞–≥
```

### 4. –õ–æ–≥–∏–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤ –≤ _create_target_variables
```python
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
disable_progress = self.disable_progress or self.process_position is not None

pbar = tqdm(df.index, 
           desc=f"–ê–Ω–∞–ª–∏–∑ LONG –ø–æ–∑–∏—Ü–∏–π ({df['symbol'].iloc[0]})", 
           unit="—Å—Ç—Ä–æ–∫–∞",
           disable=disable_progress,  # –û—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ
           position=position,
           leave=False)
```

### 5. –£–ª—É—á—à–µ–Ω –≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
```python
with tqdm(total=len(symbols), desc="üöÄ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤", unit="—Å–∏–º–≤–æ–ª") as pbar:
    for future in concurrent.futures.as_completed(future_to_symbol):
        symbol = future_to_symbol[future]
        try:
            result = future.result()
            if not result.empty:
                featured_dfs.append(result)
                total_records = sum(len(df) for df in featured_dfs)
                pbar.set_postfix({
                    '–¢–µ–∫—É—â–∏–π': symbol, 
                    '–ì–æ—Ç–æ–≤–æ': f"{len(featured_dfs)}/{len(symbols)}",
                    '–ó–∞–ø–∏—Å–µ–π': f"{total_records:,}"
                })
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –±–æ–ª—å—à–µ –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç—Å—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–µ–∫—É—â–µ–º —Å–∏–º–≤–æ–ª–µ
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã (LONG/SHORT) –æ—Ç–∫–ª—é—á–µ–Ω—ã –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑–∞ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π)
2. –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è –ø—É—Å—Ç—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –≤—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏